"use strict";!function(e){var o={isNullOrUndefined:function(e){return null==e},prefix:function(e,t){if("string"!=typeof t)throw new Error('argument#1 "prefix" required string');if(null===e||"object"!=typeof e)return e;var r,n={};for(r in e)n[t+r]=e[r];return n},unprefix:function(e,t){if("string"!=typeof t)throw new Error('argument#1 "prefix" required string');if(null===e||"object"!=typeof e)return e;var r,n={};for(r in e)n[0===r.indexOf(t)?r.substring(t.length):r]=e[r];return n}},t={getValue:function(e,t){if(!(e instanceof Array))throw new Error('argument#0 "elements required Array');if(e.length<=0)throw new Error('argument#0 "elements is empty');var r=e[0],n=r.tagName.toLowerCase(),e="input"===n?this.getInputElementValue(e):"textarea"===n?r.value:"select"===n?this.getSelectElementValue(r):r.innerHtml;return e},setValue:function(e,t,r){if(!(e instanceof Array))throw new Error('argument#0 "elements required Array');if(e.length<=0)throw new Error('argument#0 "elements is empty');var n=e[0],a=n.tagName.toLowerCase();o.isNullOrUndefined(t)&&(t=""),"input"===a?this.setInputElementValue(e,t):"textarea"===a?n.value=t:"select"===a?this.setSelectElementValue(n,t):n.innerHtml=t},getInputElementValue:function(e){if(!(e instanceof Array))throw new Error('argument#0 "elements required Array');if(e.length<=0)throw new Error('argument#0 "elements is empty');var t=e[0],r=t.tagName.toLowerCase(),n=t.getAttribute("type");if("input"===r&&"radio"===n){for(var a=null,i=0;i<e.length;i++)if((l=e[i]).checked){a=l.value;break}}else if("input"===r&&"checkbox"===n){a=[];for(var l,i=0;i<e.length;i++)(l=e[i]).checked&&a.push(l.value)}else a=t.value;return a},setInputElementValue:function(e,t){if(!(e instanceof Array))throw new Error('argument#0 "elements required Array');if(e.length<=0)throw new Error('argument#0 "elements is empty');var r=e[0],n=r.tagName.toLowerCase(),a=r.getAttribute("type");if("input"===n&&"radio"===a)for(var i=0;i<e.length;i++)(l=e[i]).checked=l.value==t;else if("input"===n&&"checkbox"===a)for(var l,u=t instanceof Array?t:[t],i=0;i<e.length;i++)(l=e[i]).checked=u.includes(l.value);else r.value=t},getSelectElementValue:function(e){if(o.isNullOrUndefined(e))throw new Error('argument#0 "element is null/undefined');var t;if(!e.multiple)return-1!==(t=e.selectedIndex)?e.item(t).value:null;for(var r=[],n=0;n<e.length;n++){var a=e.item(n);a.selected&&r.push(a.value)}return r},setSelectElementValue:function(e,t){if(o.isNullOrUndefined(e))throw new Error('argument#0 "element is null/undefined');if(e.multiple)for(var r=0;r<e.length;r++){var n=e.item(r),a=!1;t instanceof Array&&(a=t.includes(n.value)),n.selected=a}else e.value=t}},r={};function n(e,t){t=t||{};var r=n.config;this._baseElement=e,this._dataHandlers=t.dataHandlers||{},this._nameAttributeName=t.nameAttributeName||r.defaultNameAttributeName,this._typeAttributeName=t.typeAttributeName||r.defaultTypeAttributeName,this._initDataHandlers=r.initDataHandlers}r.getValue=function(e,t){return e[0].checked},r.setValue=function(e,t,r){e[0].checked=t},n.config={defaultNameAttributeName:"data-name",defaultTypeAttributeName:"data-type",initDataHandlers:{default:t,"checkbox-boolean":r}},n.prototype.getBaseElement=function(){return this._baseElement},n.prototype.getData=function(e,t){if("string"!=typeof e&&!(e instanceof Array))throw new Error('argument#0 "expression" required string or Array');t=t||!1;var r=this.convertExpressionToSelector(e),r=this.queryElementsBySelector(r),n=this.groupElementsByName(r);if(e instanceof Array||"*"===e.charAt(e.length-1)){var a,i,l,u={};for(a in n)""===a||(i=n[a],l=this.doGetDataValue(i,t),o.isNullOrUndefined(l)&&t)||(u[a]=l);return u}if(r.length<=0)return null;for(a in n)if(""!==a)return i=n[a],this.doGetDataValue(i,t)},n.prototype.setData=function(e,t,r){if("string"!=typeof e&&!(e instanceof Array))throw new Error('argument#0 "expression" required string or Array');r=r||!1;var n=this.convertExpressionToSelector(e),n=this.queryElementsBySelector(n),a=this.groupElementsByName(n);if(e instanceof Array||"*"===e.charAt(e.length-1))for(var i in t=t||{},a){var l=a[i],u=t[i];o.isNullOrUndefined(u)&&!r||this.doSetDataValue(l,u,r)}else if(!(n.length<=0))for(var i in a){l=a[i];this.doSetDataValue(l,t,r)}},n.prototype.doGetDataValue=function(e,t){if(!(e instanceof Array))throw new Error('argument#0 "elements required Array');if(e.length<=0)throw new Error('argument#0 "elements is empty');return this.getDataHandlerByElement(e[0]).getValue(e,t||!1)},n.prototype.doSetDataValue=function(e,t,r){if(!(e instanceof Array))throw new Error('argument#0 "elements required Array');if(e.length<=0)throw new Error('argument#0 "elements is empty');this.getDataHandlerByElement(e[0]).setValue(e,t,r||!1)},n.prototype.getDataHandlerByElement=function(e){if(o.isNullOrUndefined(e))throw new Error('argument#0 "element is null/undefined');var t=e.getAttribute(this._typeAttributeName);if(o.isNullOrUndefined(t)){var e=e.tagName.toLowerCase(),r=this._dataHandlers[t="@"+e]||this._initDataHandlers[t];o.isNullOrUndefined(r)&&(r=this._dataHandlers.default||this._initDataHandlers.default)}else if(r=this._dataHandlers[t]||this._initDataHandlers[t],o.isNullOrUndefined(r))throw new Error('not found handler "'+t+'"');return r},n.prototype.queryElementsBySelector=function(e){if("string"==typeof e||e instanceof Array)return e=e instanceof Array?e.join(","):e,this._baseElement.querySelectorAll(e);throw new Error('argument#0 "selector" required string or Array')},n.prototype.convertExpressionToSelector=function(e){if("string"!=typeof e&&!(e instanceof Array))throw new Error('argument#0 "expression" required string or Array');for(var t=[],r=e instanceof Array?e:[e],n=0;n<r.length;n++){var a,i=r[n];""!==i&&(a="*"===i?"["+this._nameAttributeName+"]":"*"===i.charAt(i.length-1)?(a=i.slice(0,-1),"["+this._nameAttributeName+'^="'+a+'"]'):"["+this._nameAttributeName+'="'+i+'"]',t.push(a))}return t},n.prototype.groupElementsByName=function(e){if(o.isNullOrUndefined(e))throw new Error('argument#0 "elements is null/undefined');for(var t={},r=0;r<e.length;r++){var n,a=e[r],i=t[n=a.getAttribute(this._nameAttributeName)||""];o.isNullOrUndefined(i)&&(t[n]=i=[]),i.push(a)}return t};r={Model:n,utils:o,dataHandlers:{checkboxBooleanHandler:r,defaultDataHandler:t},model:function(e,t){return new n(e,t)}};e.uiData=r,e.$uiData=r}(window);